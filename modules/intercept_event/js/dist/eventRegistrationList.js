webpackJsonp([6],{0:function(a,b){a.exports=React},1103:function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(0),e=c.n(d),f=c(14),g=c.n(f),h=c(74),i=c(1104),j=Object(h.a)(i.a);Object(f.render)(e.a.createElement(j,null),document.getElementById("eventRegistrationRoot"))},1104:function(a,b,c){"use strict";var d=c(1105),e=c(1106);b.a=Object(d.a)(e.a)},1105:function(a,b,c){"use strict";var d=c(339),e=c.n(d),f=c(8),g=c.n(f),h=c(291),i={view:{type:d.UrlQueryParamTypes.string},showSaves:{type:d.UrlQueryParamTypes.boolean},showRegistrations:{type:d.UrlQueryParamTypes.boolean}},j=function a(b){return Object(h.a)(Object(d.addUrlProps)({urlPropsQueryConfig:i})(b))};b.a=j},1106:function(a,b,d){"use strict";function e(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"upcoming",b=1<arguments.length?arguments[1]:void 0,c="past"===a?"<":">",d=l()(new Date).toISOString();return{date:{path:b,value:d,operator:c}}}var f=d(0),g=d.n(f),h=d(1),i=d.n(h),j=d(17),k=d(22),l=d.n(k),m=d(43),n=d.n(m),o=d(29),p=d.n(o),q=d(110),r=d.n(q),s=d(8),t=d.n(s),u=d(185),v=d(195),w=d(102),x=d(224),y=d(592),z=t.a.constants,A=t.a.api,B=t.a.select,C=z,c=n.a.intercept.parameters.user.uuid,D=[{key:"past",value:"Past"},{key:"upcoming",value:"Upcoming"}],E=function(a){function b(a){var c;return babelHelpers.classCallCheck(this,b),c=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(b).call(this,a)),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(c)),"handleViewChange",function(a){c.props.onChangeView(a),c.doFetch(a)}),c.state={open:!1},c.handleViewChange=c.handleViewChange.bind(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(c))),c.doFetch=p()(c.doFetch,300).bind(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(c))),c.doFetchRegistrations=c.doFetchRegistrations.bind(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(c))),c.doFetchSavedEvents=c.doFetchSavedEvents.bind(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(c))),c}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"componentDidMount",value:function a(){this.props.fetchAudiences({fields:babelHelpers.defineProperty({},C.TYPE_AUDIENCE,["name"])}),this.doFetch(this.props.view)}},{key:"doFetchRegistrations",value:function a(b){this.props.fetchRegistrations({filters:babelHelpers.objectSpread({user:{path:"field_user.id",value:c}},e(b,"field_event.field_date_time.end_value")),include:["field_event","field_event.image_primary","field_event.image_primary.field_media_image","field_event.field_location"],headers:{"X-Consumer-ID":t.a.consumer}})}},{key:"doFetchSavedEvents",value:function a(b){this.props.fetchSavedEvents({filters:{user:{path:"uid.uid",value:c}},include:["flagged_entity","flagged_entity.image_primary","flagged_entity.image_primary.field_media_image","flagged_entity.field_location"],headers:{"X-Consumer-ID":t.a.consumer}})}},{key:"doFetch",value:function a(b){this.props.showSaves&&this.doFetchSavedEvents(b),this.props.showRegistrations&&this.doFetchRegistrations(b)}},{key:"doConfirmAction",value:function a(){this.setState({open:!0,text:"Confirm cancel"})}},{key:"render",value:function a(){var b=this.props,c=this.handleViewChange,d=b.events,e=b.view,f=b.isLoading,h=function a(b){return b.map(function(a){return{key:a.data.id,node:g.a.createElement(v.a,{id:a.data.id,className:"event-teaser"})}})},i=0<d.length?g.a.createElement(u.a,{heading:null,items:h(d)}):f?g.a.createElement(w.a,{loading:f}):g.a.createElement("p",null,"No events available.");return g.a.createElement("div",{className:"l--main"},g.a.createElement("div",{className:"l--subsection"},g.a.createElement(x.a,{options:D,value:e,handleChange:c})),g.a.createElement("div",{className:"l--subsection"},i))}}]),b}(f.Component);E.propTypes={events:i.a.array,onChangeView:i.a.func.isRequired,fetchAudiences:i.a.func.isRequired,fetchRegistrations:i.a.func.isRequired,fetchSavedEvents:i.a.func.isRequired,view:i.a.string,showSaves:i.a.bool,showRegistrations:i.a.bool},E.defaultProps={events:[],view:"upcoming",showSaves:!0,showRegistrations:!0};var F=function a(b,d){var e="past"===d.view?"usersPastEvents":"usersUpcomingEvents";return!1===d.showSaves&&(e="past"===d.view?"usersPastRegisteredEvents":"usersUpcomingRegisteredEvents"),!1===d.showRegistrations&&(e="past"===d.view?"usersPastSavedEvents":"usersUpcomingSavedEvents"),{events:B[e](c)(b),registrations:B.eventRegistrations(b),isLoading:B.recordsAreLoading(C.TYPE_EVENT_REGISTRATION)(b)||B.recordsAreLoading(C.TYPE_SAVED_EVENT)(b)}},G=function a(b,c){return{fetchAudiences:function a(c){b(A[C.TYPE_AUDIENCE].fetchAll(c))},fetchRegistrations:function a(c){b(A[C.TYPE_EVENT_REGISTRATION].fetchAll(c))},fetchSavedEvents:function a(c){b(A[C.TYPE_SAVED_EVENT].fetchAll(c))}}};b.a=Object(j.b)(F,G)(E)},14:function(a,b){a.exports=ReactDOM},195:function(a,b,d){"use strict";var e=d(210),f=d.n(e),g=d(0),h=d.n(g),i=d(1),j=d.n(i),k=d(17),l=d(22),m=d.n(l),n=d(20),o=d.n(n),p=d(8),q=d.n(p),r=d(161),s=d(196),t=d(197),u=d(198),v=q.a.select,w=q.a.constants,x=q.a.utils,y=w,c=x.getUserUuid(),z=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(b).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"render",value:function a(){var b=this.props,c=b.id,d=b.event,e=b.registrations,f=function a(b){return{id:b.id,name:o()(b,"attributes.name")}},g=m()(x.dateFromDrupal(d.attributes.field_date_time.value)),i=Array.isArray(d.relationships.field_event_audience)?d.relationships.field_event_audience.map(f).filter(function(a){return a.id}):[],j=0<i.length?h.a.createElement(r.a,{label:"Audience",key:"audience",values:i}):null,k=o()(d,"attributes.event_thumbnail");return h.a.createElement(s.a,{key:c,modifiers:[k?"with-image":"without-image"],image:k,supertitle:o()(d,"relationships.field_location.attributes.title"),title:d.attributes.title,titleUrl:d.attributes.path?d.attributes.path.alias:"/node/".concat(d.attributes.nid),date:{month:g.utcOffset(x.getUserUtcOffset()).format("MMM"),date:g.utcOffset(x.getUserUtcOffset()).format("D"),time:x.getTimeDisplay(g).replace(":00","")},description:o()(d,"attributes.field_text_teaser.value"),tags:[j],registrations:e,footer:function a(b){return h.a.createElement(h.a.Fragment,null,h.a.createElement(t.a,{eventId:b.event.id}),h.a.createElement(u.a,{eventId:b.event.id}))},event:d})}}]),b}(g.PureComponent);z.propTypes={id:j.a.string.isRequired,event:j.a.object.isRequired,registrations:j.a.array},z.defaultProps={registrations:[]};var A=function a(b,d){var e=v.getIdentifier(y.TYPE_EVENT,d.id),f=v.eventRegistrationsByEventByUser(d.id,c)(b);return{event:v.bundle(e)(b),registrations:f}};b.a=Object(k.b)(A)(z)},22:function(a,b){a.exports=moment},224:function(a,b,c){"use strict";var d=c(0),e=c.n(d),f=c(1),g=c.n(f),h=c(25),i=c.n(h),j=function a(b){return{checked:{fontWeight:"bold"},unChecked:{fontWeight:"bold",color:b.palette.secondary.main}}},k=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(b).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"render",value:function a(){var b=this.props,c=b.value,d=b.handleChange,f=b.options,g=function a(b){return"view-switcher__button ".concat(b&&"view-switcher__button--active")};return e.a.createElement("div",{className:"view-switcher"},f.map(function(a){return e.a.createElement("button",{key:a.key,className:g(c===a.key),disabled:c===a.key,onClick:function b(){return d(a.key)}},a.value)}))}}]),b}(e.a.PureComponent);k.propTypes={handleChange:g.a.func.isRequired,value:g.a.string,options:g.a.arrayOf(g.a.shape({key:g.a.string,value:g.a.string})).isRequired},k.defaultProps={value:"list"},b.a=Object(h.withStyles)(j)(k)},291:function(a,b,c){"use strict";function d(a){return a.displayName||a.name||"Component"}function e(a){var b=function(b){function c(){return babelHelpers.classCallCheck(this,c),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(c).apply(this,arguments))}return babelHelpers.inherits(c,b),babelHelpers.createClass(c,[{key:"componentDidMount",value:function a(){var b=this;k.a.history.listen(function(){b.forceUpdate()})}},{key:"render",value:function b(){return i.a.createElement(a,this.props)}}]),c}(h.Component);return b.displayName="UpdateWithHistory(".concat(d(a),")"),b}var f=c(64),g=c.n(f),h=c(0),i=c.n(h),j=c(8),k=c.n(j);b.a=e},43:function(a,b){a.exports=drupalSettings},592:function(a,b,c){"use strict";var d=c(0),e=c.n(d),f=c(1),g=c.n(f),h=c(105),i=c.n(h),j=c(22),k=c.n(j),l=c(8),m=c.n(l),n=c(195),o=c(185),p=m.a.utils,q=function(a){function b(){var a,c;babelHelpers.classCallCheck(this,b);for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=babelHelpers.possibleConstructorReturn(this,(a=babelHelpers.getPrototypeOf(b)).call.apply(a,[this].concat(e))),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(c)),"state",{}),c}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"render",value:function a(){var b=this.props,c=b.events,d=b.loading,f=function a(b){return b.map(function(a){return{key:a,node:e.a.createElement(n.a,{id:a,className:"event-teaser"})}})},g=0<c.length?i()(c,function(a){return e.a.createElement(o.a,{heading:p.getDayDisplay(k.a.tz(a.date,p.getUserTimezone())),items:f(a.items),key:a.key})}):!d&&e.a.createElement("p",{key:0},"No events have been loaded.");return e.a.createElement("div",{className:"events-list"},g)}}]),b}(e.a.Component);q.propTypes={events:g.a.arrayOf(Object).isRequired,loading:g.a.bool},q.defaultProps={loading:!1},b.a=q},75:function(a,b){a.exports=interceptTheme},8:function(a,b){a.exports=interceptClient}},[1103]);