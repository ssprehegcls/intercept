webpackJsonp([9],{0:function(a,b){a.exports=React},1149:function(a,b,c){"use strict";function d(a){var b=a.getAttribute("data-reservation-uuid"),c=a.getAttribute("data-status");Object(g.render)(f.a.createElement(o,{entityId:b,isStaff:m.a.utils.userIsStaff(),status:c,type:m.a.constants.TYPE_ROOM_RESERVATION}),a)}Object.defineProperty(b,"__esModule",{value:!0});var e=c(0),f=c.n(e),g=c(9),h=c.n(g),i=c(71),j=c(23),k=c.n(j),l=c(8),m=c.n(l),n=c(1150),o=Object(i.a)(n.a),p=babelHelpers.toConsumableArray(document.getElementsByClassName("js--room-reservation-action"));p.map(d)},1150:function(a,b,d){"use strict";function e(a,b,c){return babelHelpers.objectSpread({},c,a,b,{setStatusTo:function c(d){return b.setStatusTo(d,a.record)}})}var f=d(0),g=d.n(f),h=d(1),i=d.n(h),j=d(17),k=d(20),l=d.n(k),m=d(8),n=d.n(m),o=d(1151),p=d(100),q=d(1152),r=n.a.actions,s=n.a.api,t=n.a.select,u=n.a.session,v=n.a.utils,w=n.a.constants,c=function(a){function b(a){var c;return babelHelpers.classCallCheck(this,b),c=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(b).call(this,a)),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(c)),"getActions",function(a){var b=babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(c)),d=b.cancel,e=b.deny,f=b.approve,g=b.request,h=v.userIsManager();return"requested"===a?h?[f(),e()]:[d()]:"denied"===a?h?[f(),d()]:null:"approved"===a?h?[e(),d()]:[d()]:"canceled"===a?h?[g()]:null:null}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(c)),"cancel",function(){return c.actionButton({status:"canceled",label:"Cancel"})}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(c)),"deny",function(){return c.actionButton({status:"denied",label:"Deny"})}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(c)),"request",function(){return c.actionButton({status:"requested",label:"Rerequest"})}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(c)),"approve",function(){return c.actionButton({status:"approved",label:"Approve",variant:"raised"})}),c.actionButton=c.actionButton.bind(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(c))),c}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"componentDidMount",value:function a(){this.props.fetchReservation(this.props.entityId)}},{key:"actionButton",value:function a(b){var c=b.status,d=b.label,e=b.variant,f=this.props,h=f.record,i=f.entityId,j=f.setStatusTo;return h?g.a.createElement(o.a,{entityId:i,type:w.TYPE_ROOM_RESERVATION,record:h,text:d,onClick:function a(){return j(c)},key:c,variant:e}):null}},{key:"render",value:function a(){var b=this.props,c=b.record,d=b.isLoading,e=l()(c,"data.attributes.field_status")||this.props.status,f=d?g.a.createElement(p.a,{loading:d,size:20}):this.getActions(e);return g.a.createElement("div",{className:"reservation-register-button__inner"},g.a.createElement(q.a,{status:e,syncing:l()(c,"state.syncing")}),f)}}]),b}(g.a.Component);c.propTypes={entityId:i.a.string.isRequired,type:i.a.string.isRequired,status:i.a.string.isRequired,fetchReservation:i.a.func.isRequired,isLoading:i.a.bool,setStatusTo:i.a.func.isRequired,record:i.a.object},c.defaultProps={record:null,isLoading:!1};var x=function a(b,c){return{record:t.record(t.getIdentifier(w.TYPE_ROOM_RESERVATION,c.entityId))(b),isLoading:t.recordsAreLoading(w.TYPE_ROOM_RESERVATION)(b)||t.recordIsLoading(w.TYPE_ROOM_RESERVATION,c.entityId)(b)}},y=function a(b,c){var d=c.entityId,e=c.type,f=function a(){u.getToken().then(function(a){b(s[e].sync(d,{headers:{"X-CSRF-Token":a}}))}).catch(function(a){console.log("Unable to save Reservation",a)})},g=function a(c,f){var g=f.data;g.attributes.field_status=c,b(r.edit(g,e,d))};return{setStatusTo:function a(b,c){g(b,c),f(e)},fetchReservation:function a(c){b(s[w.TYPE_ROOM_RESERVATION].fetchAll({filters:{uuid:{value:c,path:"uuid"}}}))}}};b.a=Object(j.b)(x,y,e)(c)},1151:function(a,b,c){"use strict";var d=c(0),e=c.n(d),f=c(1),g=c.n(f),h=c(17),i=c(20),j=c.n(i),k=c(25),l=c.n(k),m=c(8),n=c.n(m),o=c(23),p=c.n(o),q=n.a.select,r=j()(p.a,"intercept.user.uuid"),s=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(b).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"render",value:function a(){var b=this.props,c=b.onClick,d=b.text,f=b.variant;return e.a.createElement(l.a,{variant:f,size:"small",color:"primary",className:"action-button__button",onClick:c},d)}}]),b}(e.a.PureComponent);s.propTypes={entityId:g.a.string.isRequired,onClick:g.a.func,type:g.a.string.isRequired,text:g.a.string,variant:g.a.string},s.defaultProps={onClick:null,userId:r,mustRegister:!1,registrationAllowed:!1,registerUrl:null,text:"",variant:"outlined"};var t=function a(b,c){var d=c.entityId,e=c.type,f=q.reservationButtonText(d,e)(b);return{text:f}};b.a=s},1152:function(a,b,c){"use strict";var d=c(0),e=c.n(d),f=c(1),g=c.n(f),h=c(17),i=c(8),j=c.n(i),k=c(23),l=c.n(k),m=function(a){function b(){var a,c;babelHelpers.classCallCheck(this,b);for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=babelHelpers.possibleConstructorReturn(this,(a=babelHelpers.getPrototypeOf(b)).call.apply(a,[this].concat(e))),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(c)),"getText",function(a,b){return"denied"===a?b?"Denying":"Denied":"approved"===a?b?"Approving":"Approved":"canceled"===a?b?"Cancelling":"Canceled":"requested"===a?b?"Rerequesting":"Awaiting Approval":null}),c}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"render",value:function a(){var b=this.getText(this.props.status,this.props.syncing);return b?e.a.createElement("p",{className:"action-button__message"},b):null}}]),b}(e.a.PureComponent);m.propTypes={status:g.a.string.isRequired,syncing:g.a.bool},m.defaultProps={syncing:!1},b.a=m},23:function(a,b){a.exports=drupalSettings},72:function(a,b){a.exports=interceptTheme},8:function(a,b){a.exports=interceptClient},9:function(a,b){a.exports=ReactDOM}},[1149]);